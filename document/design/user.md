HeiMusic 用户功能设计
---------------------

HeiMusic的用户功能设计

## 1. 用户鉴权

### 1.1 用户注册

用户邮箱唯一，作为登录系统的账号。同时用户id也为唯一，作为系统内的用户标识。

用户注册时提供邮箱地址，获取注册邮件，邮件中包含验证码。通过邮箱与验证码完成注册。

### 1.2 用户登录

用户可使用邮箱与密码进行登录，或使用邮箱与验证码进行登录。

登录成功则向请求端发送两个值(userId, sessionId)，请求端后续操作携带这两个值，用于鉴权。

### 1.3 用户登出

用户可在登录状态时退出登录，置当前sessionId失效。

### 1.4 用户密码设定

用户在邮箱注册完成后，默认无密码，因此无法通过密码进行登录。

在登录状态下，通过邮件验证码进行验证，验证成功则可设定新的密码。

密码更改后会将所有有效的sessionId置为失效

### 1.5 用户密码找回

用户可以通过邮箱验证码在未登录情况下重设密码。

## 2. 用户信息

### 2.1 用户基础信息

用户可设置其基础信息，包括{用户名，头像，签名，性别}

## 3. 管理账户

管理账户用于登录系统后台，管理音乐数据，更改后台系统设置。

### 3.1 管理账户设置

管理账户通过普通用户的userId进行鉴权，通过在后端系统的配置文件中指定管理账户的userId完成设置。

### 3.2 管理账户权限

被指定为管理账户的用户，可在管理本系统的数据，具体包括：

- 音乐专辑，艺术家，音乐数据
- 注册系统的开放与关闭
